#!/bin/sh

printerr ()
{
    echo "[----]" $*
}

exit_error () 
{
    printerr 
    printerr BUILD ENVIRONMENT CORRUPTION
    printerr
    printerr Environment says DST_BUILD is \'$DST_BUILD\'
    printerr    But current build dir is \'@CMAKE_BINARY_DIR@\'
    printerr
    printerr  Environment says DST_SRC is \'$DST_SRC\'
    printerr   But current source dir is \'@CMAKE_SOURCE_DIR@\'
    printerr
    exit 2
}

if [ -n "$DST_BUILD" -a "$DST_BUILD" != "@CMAKE_BINARY_DIR@" ]
    then 
    exit_error
fi

if [ -n "$DST_SRC" -a "$DST_SRC" != "@CMAKE_SOURCE_DIR@" ]
    then 
    exit_error
fi

exit 0
